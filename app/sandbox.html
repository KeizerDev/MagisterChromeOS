<!--
  - Copyright (c) 2012 The Chromium Authors. All rights reserved.
  - Use of this source code is governed by a BSD-style license that can be
  - found in the LICENSE file.
  -->
<!doctype html>
<html>
  <head>
    <script src="bower_components/handlebars/handlebars.min.js"></script>
  </head>
  <body>

    <!-- Schoolkiezer -->
    <script id="schoolkiezen" type="text/x-handlebars-template">
        <form>
            <input class="form-control" type="text" id="schoolsearch" placeholder="School">
            <div class="list-group schoolresult"></div>
            <input class="btn btn-default" type="submit" value="KIES MIJN SCHOOL">
        </form
    </script>

    <!-- Login -->
    <script id="schoollogin" type="text/x-handlebars-template">
        <form>
            <input class="form-control" type="text" placeholder="Gebruikersnaam">
            <input class="form-control" type="text" placeholder="Wachtwoord">
            <input class="btn btn-default" type="submit" value="Inloggen">
        </form>
    </script>

    <script>
      var templatesElements = document.querySelectorAll("script[type='text/x-handlebars-template']"),
          templates = {},
          source, name;

      // precompile all templates in this page
      for (var i=0; i<templatesElements.length; i++) {
        source = templatesElements[i].innerHTML;
        name = templatesElements[i].id;
        console.log(templatesElements[i].id)
        templates[name] = Handlebars.compile(source);
      }

      // Set up message event handler:
      window.addEventListener('message', function(event) {
        var command = event.data.command,
            template = templates[event.data.templateName],
            result = "invalid request";

        // if we don't know the templateName requested, return an error message
        if (!template) {
          result = 'Unknown template: ' + event.data.templateName;
        } else {
          switch(command) {
            case 'render':
              result = template(event.data.context);
              break;
          // you could even do dynamic compilation, by accepting a command
          // to compile a new template instead of using static ones, for example:
          // case 'new':
          //   template = Handlebars.compile(event.data.templateSource);
          //   result = template(event.data.context);
          //   break;
          }
        }
        event.source.postMessage({'result': result}, event.origin);
      });
    </script>
  </body>
</html>